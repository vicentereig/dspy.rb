---
http_interactions:
- request:
    method: post
    uri: https://collector.newrelic.com/agent_listener/invoke_raw_method?license_key=<NEW_RELIC_LICENSE_KEY>&marshal_format=json&method=log_event_data&protocol_version=17&run_id=Bd5lEViHpw4FADvrtB84K3po5DCgAAEBAAAnIQEAABPPAgQfPOcaAwAGOS4yMS4wAAtzaW1iYS5sb2NhbAAHRFNQeS5yYg
    body:
      encoding: UTF-8
      string: '[{"common":{"attributes":{"entity.name":"DSPy.rb","hostname":"simba.local","entity.guid":"MzkyNjk2NHxBUE18QVBQTElDQVRJT058NTI0MDg1MDE4"}},"logs":[{"level":"INFO","timestamp":1759785027147.205,"message":"trace_id=\"b8675465-3e9f-4360-8c2b-7cc15450af82\"
        otel_span_stack=[] input_tokens=686 output_tokens=249 total_tokens=935 gen_ai.system=\"openai\"
        gen_ai.request.model=\"gpt-4o-mini\" dspy.signature=\"BAMLSchemaFormatSpecs::TaskDecomposition\"
        event=\"lm.tokens\"\n"},{"level":"INFO","timestamp":1759785027150.6492,"message":"trace_id=\"b8675465-3e9f-4360-8c2b-7cc15450af82\"
        otel_span_stack=[] input_tokens=616 output_tokens=242 total_tokens=858 gen_ai.system=\"openai\"
        gen_ai.request.model=\"gpt-4o-mini\" dspy.signature=\"BAMLSchemaFormatSpecs::ResearchExecution\"
        event=\"lm.tokens\"\n"}]}]'
    headers:
      Content-Encoding:
      - identity
      Host:
      - collector.newrelic.com
      Nr-Utilizationmetadata:
      - AQICFgALc2ltYmEubG9jYWwXAAtzaW1iYS5sb2NhbA
      Nr-Utilizationextra:
      - AQARAAUAAAAIAABgAA
      Nr-Session:
      - Bd5lEViHpw4FADvrtB84K3po5DCgAAEBAAAnIQEAABPPAgQfPOcaAwAGOS4yMS4wAAtzaW1iYS5sb2NhbAAHRFNQeS5yYg
      Nr-Agenttags:
      - AX2uHIkGAAlhY2NvdW50SWQABzM5MjY5NjQAEHRydXN0ZWRBY2NvdW50SWQABzM5MjY5NjQAB2FjY291bnQAD0FjY291bnQgMzkyNjk2NA
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - NewRelic-RubyAgent/9.21.0 (ruby 3.3.6 arm64-darwin23) zlib/1.2.12
      Content-Type:
      - application/octet-stream
  response:
    status:
      code: 202
      message: Accepted
    headers:
      Date:
      - Mon, 06 Oct 2025 21:10:32 GMT
      Content-Type:
      - application/json; charset=UTF-8
      Content-Length:
      - '0'
      Connection:
      - keep-alive
      Cf-Ray:
      - 98a8256169ad202f-IAD
      Cf-Cache-Status:
      - DYNAMIC
      Server:
      - cloudflare
      Nr-Rate-Limited:
      - allowed
      X-Envoy-Upstream-Service-Time:
      - '0'
      Vary:
      - accept-encoding
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Mon, 06 Oct 2025 21:10:32 GMT
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-mini","messages":[{"role":"system","content":"Your
        input schema fields are:\n```baml\nenum ComplexityLevel {\n  \"basic\"\n  \"intermediate\"\n  \"advanced\"\n}\n\nclass
        BAMLSchemaFormatSpecs::TaskDecompositionInput {\n  topic string\n  context
        string\n  complexity_level ComplexityLevel\n}\n```\nYour output schema fields
        are:\n```baml\nclass BAMLSchemaFormatSpecs::TaskDecompositionOutput {\n  subtasks
        string[]\n  task_types string[]\n  priority_order int[]\n  estimated_effort
        int[]\n  dependencies string[]\n  agent_requirements string[]\n}\n```\n\nAll
        interactions will be structured in the following way, with the appropriate
        values filled in.\n## Input values\n```json\n{input_values}\n```\n## Output
        values\nRespond exclusively with the output schema fields in the json block
        below.\n```json\n{output_values}\n```\n\nIn adhering to this structure, your
        objective is: Autonomously analyze a research topic and define optimal subtasks
        with strategic prioritization"},{"role":"user","content":"## Input Values\n```json\n{\n  \"topic\":
        \"Sustainable technology adoption in developing countries\",\n  \"context\":
        \"Focus on practical implementation challenges\",\n  \"complexity_level\":
        \"intermediate\"\n}\n```\n\nRespond with the corresponding output schema fields
        wrapped in a ```json ``` block,\nstarting with the heading `## Output values`."}],"temperature":1.0}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - application/json
      User-Agent:
      - Ruby
      Host:
      - api.openai.com
      X-Stainless-Arch:
      - arm64
      X-Stainless-Lang:
      - ruby
      X-Stainless-Os:
      - MacOS
      X-Stainless-Package-Version:
      - 0.22.1
      X-Stainless-Runtime:
      - ruby
      X-Stainless-Runtime-Version:
      - 3.3.6
      Content-Type:
      - application/json
      Authorization:
      - Bearer <OPENAI_API_KEY>
      X-Stainless-Retry-Count:
      - '0'
      X-Stainless-Timeout:
      - '600.0'
      Content-Length:
      - '1391'
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 06 Oct 2025 21:10:33 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Expose-Headers:
      - X-Request-ID
      Openai-Organization:
      - "<OPENAI_ORGANIZATION>"
      Openai-Processing-Ms:
      - '5546'
      Openai-Project:
      - proj_n52OL5vlzVaXGnYDaGWmVX5F
      Openai-Version:
      - '2020-10-01'
      X-Envoy-Upstream-Service-Time:
      - '5703'
      X-Ratelimit-Limit-Requests:
      - '10000'
      X-Ratelimit-Limit-Tokens:
      - '200000'
      X-Ratelimit-Remaining-Requests:
      - '9999'
      X-Ratelimit-Remaining-Tokens:
      - '199694'
      X-Ratelimit-Reset-Requests:
      - 8.64s
      X-Ratelimit-Reset-Tokens:
      - 91ms
      X-Request-Id:
      - "<REQUEST_ID>"
      X-Openai-Proxy-Wasm:
      - v0.1
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=<REDACTED>
      - _cfuvid=<REDACTED>
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - 98a825442c8ad6f5-IAD
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-CNmlQhrNdOZYpxQhaulPdMh1H9KsF",
          "object": "chat.completion",
          "created": 1759785028,
          "model": "gpt-4o-mini-2024-07-18",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": "## Output values\n```json\n{\n  \"subtasks\": [\n    \"Identify key sustainable technologies applicable to developing countries\",\n    \"Assess current infrastructure and technological readiness\",\n    \"Conduct stakeholder analysis to understand needs and concerns\",\n    \"Develop case studies of successful implementations in similar contexts\",\n    \"Create a framework for technology adoption tailored to local conditions\",\n    \"Design training programs for local communities and organizations\"\n  ],\n  \"task_types\": [\n    \"Research\",\n    \"Analysis\",\n    \"Consultation\",\n    \"Training\",\n    \"Reporting\"\n  ],\n  \"priority_order\": [\n    1,\n    2,\n    3,\n    4,\n    5,\n    6\n  ],\n  \"estimated_effort\": [\n    15,\n    10,\n    8,\n    12,\n    18,\n    20\n  ],\n  \"dependencies\": [\n    \"Availability of existing data on local technology use\",\n    \"Engagement from local stakeholders\",\n    \"Access to funding and resources for implementation\",\n    \"Regulatory frameworks supporting technology adoption\"\n  ],\n  \"agent_requirements\": [\n    \"Subject matter experts in sustainable technology\",\n    \"Local community leaders for effective outreach\",\n    \"Data analysts for assessing infrastructure\",\n    \"Trainers with experience in capacity building\"\n  ]\n}\n```",
                "refusal": null,
                "annotations": []
              },
              "logprobs": null,
              "finish_reason": "stop"
            }
          ],
          "usage": {
            "prompt_tokens": 275,
            "completion_tokens": 269,
            "total_tokens": 544,
            "prompt_tokens_details": {
              "cached_tokens": 0,
              "audio_tokens": 0
            },
            "completion_tokens_details": {
              "reasoning_tokens": 0,
              "audio_tokens": 0,
              "accepted_prediction_tokens": 0,
              "rejected_prediction_tokens": 0
            }
          },
          "service_tier": "default",
          "system_fingerprint": "fp_560af6e559"
        }
  recorded_at: Mon, 06 Oct 2025 21:10:33 GMT
recorded_with: VCR 6.3.1
