---
http_interactions:
- request:
    method: post
    uri: https://collector.newrelic.com/agent_listener/invoke_raw_method?license_key=<NEW_RELIC_LICENSE_KEY>&marshal_format=json&method=log_event_data&protocol_version=17&run_id=BaJ4t9qNPUoQADvrtB84K3ppLdOkAAEBAAAnIQEAANNqAgQfPOcaAwAGOS4yMS4wAAtzaW1iYS5sb2NhbAAHRFNQeS5yYg
    body:
      encoding: UTF-8
      string: '[{"common":{"attributes":{"entity.name":"DSPy.rb","hostname":"simba.local","entity.guid":"MzkyNjk2NHxBUE18QVBQTElDQVRJT058NTI0MDg1MDE4"}},"logs":[{"level":"INFO","timestamp":1764610871442.6072,"message":"trace_id=\"20525dd7-f860-4e5d-8de1-989157d89d28\"
        input_tokens=410 output_tokens=52 total_tokens=462 gen_ai.system=\"openai\"
        gen_ai.request.model=\"gpt-4o-mini\" dspy.signature=\"Summarize\" module_path=[{id:
        \"976d8737-3a14-4513-a346-ad9b230aaf8a\", class: \"DSPy::Predict\", label:
        nil}] module_root={id: \"976d8737-3a14-4513-a346-ad9b230aaf8a\", class: \"DSPy::Predict\",
        label: nil} module_leaf={id: \"976d8737-3a14-4513-a346-ad9b230aaf8a\", class:
        \"DSPy::Predict\", label: nil} module_scope={ancestry_token: \"976d8737-3a14-4513-a346-ad9b230aaf8a\",
        depth: 1} event=\"lm.tokens\"\n"}]}]'
    headers:
      Content-Encoding:
      - identity
      Host:
      - collector.newrelic.com
      Nr-Utilizationmetadata:
      - AQICFgALc2ltYmEubG9jYWwXAAtzaW1iYS5sb2NhbA
      Nr-Utilizationextra:
      - AQARAAUAAAAIAABgAA
      Nr-Session:
      - BaJ4t9qNPUoQADvrtB84K3ppLdOkAAEBAAAnIQEAANNqAgQfPOcaAwAGOS4yMS4wAAtzaW1iYS5sb2NhbAAHRFNQeS5yYg
      Nr-Agenttags:
      - AX2uHIkGAAlhY2NvdW50SWQABzM5MjY5NjQAEHRydXN0ZWRBY2NvdW50SWQABzM5MjY5NjQAB2FjY291bnQAD0FjY291bnQgMzkyNjk2NA
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - NewRelic-RubyAgent/9.21.0 (ruby 3.4.5 arm64-darwin23) zlib/1.2.12
      Content-Type:
      - application/octet-stream
  response:
    status:
      code: 202
      message: Accepted
    headers:
      Date:
      - Mon, 01 Dec 2025 17:41:14 GMT
      Content-Type:
      - application/json; charset=UTF-8
      Content-Length:
      - '0'
      Connection:
      - keep-alive
      Cf-Ray:
      - 9a745fcea82f8abe-EWR
      Cf-Cache-Status:
      - DYNAMIC
      Server:
      - cloudflare
      Nr-Rate-Limited:
      - allowed
      X-Envoy-Upstream-Service-Time:
      - '1'
      Vary:
      - accept-encoding
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Mon, 01 Dec 2025 17:41:14 GMT
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-mini","messages":[{"role":"system","content":"Your
        input schema fields are:\n```json\n{\n  \"$schema\": \"http://json-schema.org/draft-06/schema#\",\n  \"type\":
        \"object\",\n  \"properties\": {\n    \"text\": {\n      \"type\": \"string\",\n      \"description\":
        \"Text to summarize\"\n    }\n  },\n  \"required\": [\n    \"text\"\n  ]\n}\n```\nYour
        output schema fields are:\n```json\n{\n  \"$schema\": \"http://json-schema.org/draft-06/schema#\",\n  \"type\":
        \"object\",\n  \"properties\": {\n    \"summary\": {\n      \"type\": \"string\",\n      \"description\":
        \"Concise summary preserving key concepts\"\n    },\n    \"reasoning\": {\n      \"type\":
        \"string\",\n      \"description\": \"Step by step reasoning process\"\n    }\n  },\n  \"required\":
        [\n    \"summary\",\n    \"reasoning\"\n  ]\n}\n```\n\nAll interactions will
        be structured in the following way, with the appropriate values filled in.\n##
        Input values\n```json\n{input_values}\n```\n## Output values\nRespond exclusively
        with the output schema fields in the json block below.\n```json\n{output_values}\n```\n\nIn
        adhering to this structure, your objective is: Summarize the given text concisely
        while preserving key concepts Think step by step."},{"role":"user","content":"##
        Input Values\n```json\n{\n  \"text\": \"Photosynthesis is a biological process
        used by many cellular organisms to convert light energy into chemical energy,
        which is stored in organic compounds that can later be metabolized through
        cellular respiration to fuel the organism''s activities. The term usually
        refers to oxygenic photosynthesis, where oxygen is produced as a byproduct
        and some of the chemical energy produced is stored in carbohydrate molecules
        such as sugars, starch, glycogen and cellulose, which are synthesized from
        endergonic reaction of carbon dioxide with water. Most plants, algae, and
        cyanobacteria perform photosynthesis; such organisms are called photoautotrophs.\\n\"\n}\n```\n\nRespond
        with the corresponding output schema fields wrapped in a ```json ``` block,\nstarting
        with the heading `## Output values`."}],"temperature":1.0}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - application/json
      User-Agent:
      - OpenAI::Client/Ruby 0.36.0
      Host:
      - api.openai.com
      X-Stainless-Arch:
      - arm64
      X-Stainless-Lang:
      - ruby
      X-Stainless-Os:
      - MacOS
      X-Stainless-Package-Version:
      - 0.36.0
      X-Stainless-Runtime:
      - ruby
      X-Stainless-Runtime-Version:
      - 3.4.5
      Content-Type:
      - application/json
      Authorization:
      - Bearer <OPENAI_API_KEY>
      X-Stainless-Retry-Count:
      - '0'
      X-Stainless-Timeout:
      - '600.0'
      Content-Length:
      - '2127'
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Mon, 01 Dec 2025 17:41:16 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Expose-Headers:
      - X-Request-ID
      Openai-Organization:
      - "<OPENAI_ORGANIZATION>"
      Openai-Processing-Ms:
      - '5043'
      Openai-Project:
      - proj_n52OL5vlzVaXGnYDaGWmVX5F
      Openai-Version:
      - '2020-10-01'
      X-Envoy-Upstream-Service-Time:
      - '5057'
      X-Ratelimit-Limit-Requests:
      - '10000'
      X-Ratelimit-Limit-Tokens:
      - '200000'
      X-Ratelimit-Remaining-Requests:
      - '9998'
      X-Ratelimit-Remaining-Tokens:
      - '199524'
      X-Ratelimit-Reset-Requests:
      - 15.652s
      X-Ratelimit-Reset-Tokens:
      - 142ms
      X-Request-Id:
      - "<REQUEST_ID>"
      X-Openai-Proxy-Wasm:
      - v0.1
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=<REDACTED>
      - _cfuvid=<REDACTED>
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - 9a745fbb3f782fdf-IAD
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-Ci2BbzFjKchFWZWpo7gkcYXZptCwH",
          "object": "chat.completion",
          "created": 1764610871,
          "model": "gpt-4o-mini-2024-07-18",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": "## Output values\n```json\n{\n  \"summary\": \"Photosynthesis is a process that converts light energy into chemical energy stored in organic compounds, mainly through oxygenic photosynthesis, where plants, algae, and cyanobacteria produce oxygen as a byproduct and synthesize carbohydrates from carbon dioxide and water.\",\n  \"reasoning\": \"1. Identify the main topic: photosynthesis as a biological process.\\n2. Note the purpose: converting light energy into chemical energy.\\n3. Highlight the organisms involved: plants, algae, and cyanobacteria, termed photoautotrophs.\\n4. Mention the byproduct of the process: oxygen.\\n5. State the products of photosynthesis: carbohydrates like sugars, starch, and cellulose, produced from carbon dioxide and water.\"\n}\n```",
                "refusal": null,
                "annotations": []
              },
              "logprobs": null,
              "finish_reason": "stop"
            }
          ],
          "usage": {
            "prompt_tokens": 446,
            "completion_tokens": 161,
            "total_tokens": 607,
            "prompt_tokens_details": {
              "cached_tokens": 0,
              "audio_tokens": 0
            },
            "completion_tokens_details": {
              "reasoning_tokens": 0,
              "audio_tokens": 0,
              "accepted_prediction_tokens": 0,
              "rejected_prediction_tokens": 0
            }
          },
          "service_tier": "default",
          "system_fingerprint": "fp_b547601dbd"
        }
  recorded_at: Mon, 01 Dec 2025 17:41:16 GMT
recorded_with: VCR 6.3.1
