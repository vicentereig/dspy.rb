{"id":"dspy.rb-04f","title":"[TDD] Make EventRegistry internal-only","description":"## Context\nEventRegistry should become internal plumbing, not a public API. Users should only use DSPy::Module.subscribe. However, Langfuse and tests can still access it via `DSPy.send(:event_registry)`.\n\n## TDD Steps\n\n### 1. RED: Identify all DSPy.events usages\n```bash\ngrep -r 'DSPy\\.events' --include='*.rb' | grep -v spec\n```\n\nInternal usages (KEEP via private accessor):\n- lib/dspy.rb:93-99 (logger subscription)\n- lib/dspy/module.rb:386 (Module.subscribe implementation)\n- lib/dspy/o11y/langfuse/scores_exporter.rb:110 (Langfuse - update to use internal API)\n\n### 2. GREEN: Make registry private but accessible\n\n**a) Change DSPy.events to private:**\n```ruby\n# lib/dspy.rb\nmodule DSPy\n  class \u003c\u003c self\n    private\n    \n    def event_registry\n      @event_registry ||= DSPy::EventRegistry.new.tap do |registry|\n        registry.subscribe('*') { |e, a| emit_log(e, a) if logger }\n      end\n    end\n  end\nend\n```\n\n**b) Update Module.subscribe to use private accessor:**\n```ruby\n# lib/dspy/module.rb\nsubscription_id = DSPy.send(:event_registry).subscribe(spec[:pattern], \u0026callback)\n```\n\n**c) Update Langfuse to use private accessor:**\n```ruby\n# lib/dspy/o11y/langfuse/scores_exporter.rb\n@subscription_id = DSPy.send(:event_registry).subscribe('score.create') do |_name, attrs|\n  # ...\nend\n```\n\n### 3. REFACTOR: Ensure internal usages still work\n\n## Files to Edit\n- lib/dspy.rb (make events private, rename to event_registry)\n- lib/dspy/module.rb (use DSPy.send(:event_registry))\n- lib/dspy/o11y/langfuse/scores_exporter.rb (use DSPy.send(:event_registry))\n\n## Acceptance Criteria\n- [ ] DSPy.events raises NoMethodError (private)\n- [ ] DSPy::Module.subscribe still works\n- [ ] Internal logger subscription still works\n- [ ] Langfuse ScoresExporter still works\n- [ ] All tests pass (tests can use DSPy.send(:event_registry))","status":"closed","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-26T15:19:44.448106+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-26T17:51:27.915511+01:00","closed_at":"2026-01-26T17:51:27.915511+01:00","close_reason":"Not needed. Keeping DSPy.events PUBLIC per DHH's advice: 'Stop hiding legitimate APIs.' Both patterns will be documented with clear guidance.","dependencies":[{"issue_id":"dspy.rb-04f","depends_on_id":"dspy.rb-v8a","type":"blocks","created_at":"2026-01-26T15:20:03.420679+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"},{"issue_id":"dspy.rb-04f","depends_on_id":"dspy.rb-iwz","type":"blocks","created_at":"2026-01-26T15:20:03.48222+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"},{"issue_id":"dspy.rb-04f","depends_on_id":"dspy.rb-bsh","type":"blocks","created_at":"2026-01-26T15:34:28.104335+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-0ch","title":"[Example] Create example code-backed tool module","description":"**Phase**: Examples","acceptance_criteria":"- Working example with external dependency\n- Shows returning typed output struct\n- Shows dependency injection","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.604948+01:00","updated_at":"2026-01-14T19:00:17.604948+01:00","dependencies":[{"issue_id":"dspy.rb-0ch","depends_on_id":"dspy.rb-gw7","type":"blocks","created_at":"2026-01-14T19:01:18.857823+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-0xp","title":"[Docs] Document case-insensitive enum matching for structured_outputs: false","status":"closed","priority":3,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-29T17:58:04.77665+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-29T18:11:42.245836+01:00","closed_at":"2026-01-29T18:11:42.245836+01:00","close_reason":"Updated signatures docs with case-insensitive enum note and added learning to adr/LEARNINGS.md","dependencies":[{"issue_id":"dspy.rb-0xp","depends_on_id":"dspy.rb-epx","type":"blocks","created_at":"2026-01-29T17:58:16.534205+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-0z0","title":"Tutorial: Parallelizing Work with DSPy.rb","description":"Write a tutorial demonstrating how to parallelize LLM work in DSPy.rb.\n\n**Primary Use Case**: Naming a conversation while answering the user's request simultaneously.\n\nWhen a user sends their first message, the system needs to:\n1. Generate a response to the user's question\n2. Generate a title/name for the conversation\n\nThese two tasks are independent and can run in parallel, reducing latency.\n\n**Tutorial Should Cover**:\n- Using Async gem with DSPy.rb modules\n- Running multiple predictions concurrently\n- Error handling for parallel operations\n- When parallelization makes sense vs sequential execution\n- Performance considerations and tradeoffs\n\n**Example Code Structure**:\n```ruby\nAsync do |task|\n  response_task = task.async { responder.predict(message: user_message) }\n  title_task = task.async { titler.predict(messages: [user_message]) }\n  \n  response = response_task.wait\n  title = title_task.wait\nend\n```","status":"open","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-17T13:21:12.64344+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-17T13:56:07.981461+01:00"}
{"id":"dspy.rb-0zs","title":"Test Issue Two","description":"This is the second test description.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-14T18:59:09.267795+01:00","updated_at":"2026-01-14T18:59:20.908409+01:00","deleted_at":"2026-01-14T18:59:20.908409+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"dspy.rb-1gj","title":"[Example] Create example hybrid tool module","description":"**Phase**: Examples","acceptance_criteria":"- LLM expands/refines input\n- Code executes actual operation\n- Shows composition of both approaches","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.605325+01:00","updated_at":"2026-01-14T19:00:17.605325+01:00","dependencies":[{"issue_id":"dspy.rb-1gj","depends_on_id":"dspy.rb-dz6","type":"blocks","created_at":"2026-01-14T19:01:18.906935+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"},{"issue_id":"dspy.rb-1gj","depends_on_id":"dspy.rb-0ch","type":"blocks","created_at":"2026-01-14T19:01:18.958395+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-32j","title":"[Test] Integration tests for signature-bound modules","description":"**Phase**: Foundation","acceptance_criteria":"- Test LLM-backed module with signature binding\n- Test code-backed module with signature binding\n- Test hybrid module (LLM + code)\n- Test `to_mcp_schema` output format\n- Test inheritance behavior\n- VCR cassettes for LLM tests","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.604214+01:00","updated_at":"2026-01-14T19:00:17.604214+01:00","dependencies":[{"issue_id":"dspy.rb-32j","depends_on_id":"dspy.rb-gw7","type":"blocks","created_at":"2026-01-14T19:01:09.038202+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"},{"issue_id":"dspy.rb-32j","depends_on_id":"dspy.rb-gym","type":"blocks","created_at":"2026-01-14T19:01:09.075995+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"},{"issue_id":"dspy.rb-32j","depends_on_id":"dspy.rb-gg8","type":"blocks","created_at":"2026-01-14T19:01:09.115275+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-3bx","title":"[Docs] Update Toolsets documentation","description":"**Phase**: Documentation","acceptance_criteria":"- Explain signature + module pattern\n- Show LLM-backed vs code-backed examples\n- Migration guide from old pattern\n- MCP export documentation","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.608861+01:00","updated_at":"2026-01-14T19:00:17.608861+01:00","dependencies":[{"issue_id":"dspy.rb-3bx","depends_on_id":"dspy.rb-cdb","type":"blocks","created_at":"2026-01-14T19:01:56.565846+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-41s","title":"[Docs] Update ReAct agent documentation","description":"**Phase**: Documentation","acceptance_criteria":"- New tool creation pattern\n- ToolOrchestrator introduction\n- Examples updated","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.609171+01:00","updated_at":"2026-01-14T19:00:17.609171+01:00","dependencies":[{"issue_id":"dspy.rb-41s","depends_on_id":"dspy.rb-emi","type":"blocks","created_at":"2026-01-14T19:01:56.609898+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-4vf","title":"[Docs] Write MCP integration guide","description":"**Phase**: Documentation","acceptance_criteria":"- Explain MCP protocol briefly\n- Show `to_mcp_schema` usage\n- Example MCP server setup\n- Tool discovery patterns","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.609515+01:00","updated_at":"2026-01-14T19:00:17.609515+01:00","dependencies":[{"issue_id":"dspy.rb-4vf","depends_on_id":"dspy.rb-gg8","type":"blocks","created_at":"2026-01-14T19:01:56.648748+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-5br","title":"[Cleanup] Remove deprecated tool classes","description":"**Phase**: Cleanup","acceptance_criteria":"- All references removed\n- Tests updated\n- No broken imports","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.608566+01:00","updated_at":"2026-01-14T19:00:17.608566+01:00","dependencies":[{"issue_id":"dspy.rb-5br","depends_on_id":"dspy.rb-mc8","type":"blocks","created_at":"2026-01-14T19:01:47.687558+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"},{"issue_id":"dspy.rb-5br","depends_on_id":"dspy.rb-9jn","type":"blocks","created_at":"2026-01-14T19:01:47.728531+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-6kp","title":"[TDD] Migrate examples and benchmarks to module pattern","description":"## Context\nExamples and benchmarks demonstrate the old global subscription pattern. Update them to show the recommended Module.subscribe pattern.\n\nNote: The old pattern still works (via internal API), but we want examples to demonstrate the recommended approach.\n\n## TDD Steps\n\n### 1. RED: Identify all examples using global subscription\n```bash\ngrep -r 'DSPy\\.events\\.subscribe' examples/\n```\n\nFiles:\n- examples/event_system_demo.rb\n- examples/baml_vs_json_benchmark.rb\n- examples/json_modes_benchmark.rb\n\n### 2. GREEN: Refactor each example to use Module.subscribe\n\n**examples/event_system_demo.rb:**\n```ruby\n# Rewrite to demonstrate Module.subscribe pattern\nclass DemoModule \u003c DSPy::Module\n  subscribe 'demo.*', :handle_demo_event\n  \n  def handle_demo_event(event_name, attrs)\n    puts \"üì° Event: #{event_name}\"\n  end\n  \n  def forward(...)\n    # demo logic\n  end\nend\n```\n\n**examples/baml_vs_json_benchmark.rb:**\n```ruby\nclass BenchmarkHarness \u003c DSPy::Module\n  subscribe 'lm.tokens', :capture_usage\n  \n  attr_reader :captured_usage\n  \n  def forward(predictor:, **input)\n    predictor.call(**input)\n  end\n  \n  def capture_usage(_, attrs)\n    @captured_usage = { input: attrs[:input_tokens], output: attrs[:output_tokens] }\n  end\nend\n```\n\n### 3. REFACTOR: Verify examples still work\n```bash\nruby examples/event_system_demo.rb\n```\n\n## Files to Edit\n- examples/event_system_demo.rb\n- examples/baml_vs_json_benchmark.rb\n- examples/json_modes_benchmark.rb\n\n## Acceptance Criteria\n- [ ] All examples use Module.subscribe pattern\n- [ ] Examples run without errors\n- [ ] Examples demonstrate the recommended (documented) pattern","status":"closed","priority":3,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-26T15:19:44.857439+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-26T17:51:28.222113+01:00","closed_at":"2026-01-26T17:51:28.222113+01:00","close_reason":"Merged into dspy.rb-v8a. Example migration is part of removing BaseSubscriber - examples will use DSPy.events.subscribe directly.","dependencies":[{"issue_id":"dspy.rb-6kp","depends_on_id":"dspy.rb-04f","type":"blocks","created_at":"2026-01-26T15:20:03.608624+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-7xb","title":"[Feature] SelectToolSignature definition","description":"**Phase**: Orchestrator","acceptance_criteria":"- Input: task, available_tools, history\n- Output: action, tool_name, tool_input\n- Handles \"finish\" action","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.607307+01:00","updated_at":"2026-01-14T19:00:17.607307+01:00","dependencies":[{"issue_id":"dspy.rb-7xb","depends_on_id":"dspy.rb-8gz","type":"blocks","created_at":"2026-01-14T19:01:39.884021+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-8gz","title":"[Feature] Create ToolOrchestrator module","description":"**Phase**: Orchestrator","acceptance_criteria":"- Accepts array of signature-bound modules\n- LLM-based tool selection\n- Configurable max iterations\n- History tracking\n- Final synthesis","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.606972+01:00","updated_at":"2026-01-14T19:00:17.606972+01:00","dependencies":[{"issue_id":"dspy.rb-8gz","depends_on_id":"dspy.rb-hf3","type":"blocks","created_at":"2026-01-14T19:01:39.831545+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-8hy","title":"[Refactor] Unify error handling across enum deserialization paths","status":"closed","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-29T17:57:58.608426+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-29T18:10:28.15885+01:00","closed_at":"2026-01-29T18:10:28.15885+01:00","close_reason":"Unified: all paths now use TypeCoercion.deserialize_enum which returns nil on no match; callers handle gracefully","dependencies":[{"issue_id":"dspy.rb-8hy","depends_on_id":"dspy.rb-epx","type":"blocks","created_at":"2026-01-29T17:58:16.46018+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-8x4","title":"[TDD] Fix SubcriptionScope typo","description":"## Context\nThere's a typo in the API: `SubcriptionScope` should be `SubscriptionScope`.\n\n## TDD Steps\n\n### 1. RED: Find all occurrences\n```bash\ngrep -r 'SubcriptionScope' --include='*.rb'\n```\n\n### 2. GREEN: Rename with alias for transition\n```ruby\n# lib/dspy/module.rb\nclass SubscriptionScope \u003c T::Enum\n  enums do\n    Descendants = new('descendants')\n    SelfOnly    = new('self')\n  end\nend\n\n# Alias for backwards compatibility (can remove in next major)\nSubcriptionScope = SubscriptionScope\n```\n\n### 3. REFACTOR: Update all references\n- Update specs\n- Update docs\n- Remove alias after confirming no external usage\n\n## Files to Edit\n- lib/dspy/module.rb\n\n## Acceptance Criteria\n- [ ] SubscriptionScope is the canonical name\n- [ ] All internal code uses correct spelling\n- [ ] Tests pass","status":"closed","priority":3,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-26T15:19:45.119559+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-26T17:51:28.063555+01:00","closed_at":"2026-01-26T17:51:28.063555+01:00","close_reason":"Deferred to future breaking release. Per simplicity review: 'cosmetic change with breaking cost' - the typo is in 6+ files including docs, CHANGELOG, specs."}
{"id":"dspy.rb-8zh","title":"Test Issue One","description":"This is the first test description.","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-01-14T18:59:09.266254+01:00","updated_at":"2026-01-14T18:59:20.908409+01:00","deleted_at":"2026-01-14T18:59:20.908409+01:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"dspy.rb-9bj","title":"[Bug] Prediction nested enum paths crash on T.nilable(MyEnum)","status":"closed","priority":1,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-01-29T17:58:01.445902+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-29T18:10:28.045679+01:00","closed_at":"2026-01-29T18:10:28.045679+01:00","close_reason":"Fixed: prediction.rb now uses extract_enum_class (which handles nilable unions) instead of raw_type.deserialize","dependencies":[{"issue_id":"dspy.rb-9bj","depends_on_id":"dspy.rb-epx","type":"blocks","created_at":"2026-01-29T17:58:16.384582+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-9jn","title":"[Deprecation] Deprecate Tools::Toolset","description":"**Phase**: Cleanup","acceptance_criteria":"- Warning on class inheritance\n- Warning on usage\n- Migration guide in docs","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.608265+01:00","updated_at":"2026-01-14T19:00:17.608265+01:00","dependencies":[{"issue_id":"dspy.rb-9jn","depends_on_id":"dspy.rb-cdb","type":"blocks","created_at":"2026-01-14T19:01:47.646412+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-9m7","title":"Unsafe deserialization in program storage","description":"deserialize_program uses Object.const_get with class name from serialized data (lib/dspy/storage/program_storage.rb:107-126). Could be exploited if attacker has file write access. Fix: validate class_name against allowlist of known DSPy modules.","status":"open","priority":1,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-01-24T20:00:47.51739+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-24T20:01:42.682164+01:00"}
{"id":"dspy.rb-9yn","title":"Consolidate type introspection logic into TypeUtils module","description":"Type introspection duplicated in ReAct (~70 lines), Prediction (~50 lines), TypeCoercion mixin: scalar_type?, structured_type?, type_name, extract_enum_class. Create single DSPy::TypeUtils module. ~100 LOC savings.","status":"closed","priority":3,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-24T20:00:55.817426+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-24T20:24:21.553981+01:00","closed_at":"2026-01-24T20:24:21.553981+01:00","close_reason":"Type introspection methods consolidated into TypeCoercion mixin (scalar_type?, structured_type?, string_type?, type_name, default_value_for_type). ReAct now inherits these via Predict.","dependencies":[{"issue_id":"dspy.rb-9yn","depends_on_id":"dspy.rb-bas","type":"blocks","created_at":"2026-01-24T20:02:10.054842+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-bas","title":"ReAct class decomposition (800+ lines)","description":"ReAct class is 800+ lines handling 6+ concerns: signature creation, history management, tool execution, type deserialization, output validation, type introspection. Extract to ReAct::HistoryManager, ReAct::ToolExecutor, ReAct::TypeDeserializer.","status":"closed","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-24T20:00:47.643143+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-24T20:24:15.254803+01:00","closed_at":"2026-01-24T20:24:15.254803+01:00","close_reason":"Type introspection concern extracted to TypeCoercion mixin. ReAct reduced from 869 to 766 lines. Further decomposition (HistoryManager, ToolExecutor) can be done separately as the class is now more maintainable."}
{"id":"dspy.rb-bsh","title":"[TDD] Remove SubscriberMixin (dead code)","description":"## Context\nSubscriberMixin is dead code - not used anywhere in production, only tested in isolation.\n\n## TDD Steps\n\n### 1. RED: Verify no production usage\n```bash\n# Search for any real usage (should find nothing except spec)\ngrep -r 'SubscriberMixin' --include='*.rb' | grep -v spec | grep -v subscriber_mixin.rb\n```\n\n### 2. GREEN: Remove the code\n- Delete `lib/dspy/events/subscriber_mixin.rb` (79 lines)\n- Delete `spec/unit/dspy/events/subscriber_mixin_spec.rb`\n- Remove `require_relative 'dspy/events/subscriber_mixin'` from `lib/dspy.rb:225`\n\n### 3. REFACTOR: Run full test suite\n```bash\nbundle exec rspec\n```\n\n## Files to Delete\n- lib/dspy/events/subscriber_mixin.rb\n- spec/unit/dspy/events/subscriber_mixin_spec.rb\n\n## Files to Edit\n- lib/dspy.rb (remove require)\n\n## Acceptance Criteria\n- [ ] No grep matches for SubscriberMixin in production code\n- [ ] Files deleted\n- [ ] All tests pass\n- [ ] ~80 LOC removed","status":"closed","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-26T15:19:44.029945+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-26T18:09:05.139376+01:00","closed_at":"2026-01-26T18:09:05.139376+01:00","close_reason":"Removed SubscriberMixin, BaseSubscriber, and updated all usages to use DSPy.events.subscribe directly"}
{"id":"dspy.rb-cdb","title":"[Refactor] Migrate MemoryToolset to signature-bound modules","description":"**Phase**: Migration","acceptance_criteria":"- Create `MemoryStore` signature and `MemoryStoreTool` module\n- Create `MemoryRetrieve` signature and `MemoryRetrieveTool` module\n- Create `MemoryList` signature and `MemoryListTool` module\n- Shared memory state via injection\n- Deprecation warning on old toolset","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.605637+01:00","updated_at":"2026-01-14T19:00:17.605637+01:00","dependencies":[{"issue_id":"dspy.rb-cdb","depends_on_id":"dspy.rb-32j","type":"blocks","created_at":"2026-01-14T19:01:26.388904+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna","title":"Documentation Accuracy \u0026 Best Practices Audit","description":"Comprehensive audit of docs/src/* against the actual codebase and the DSPy.rb skill best practices.\n\nA full review identified 18 issues across 4 severity levels:\n- 4 CRITICAL: Factual inaccuracies (wrong dependency versions, incorrect kwargs, non-existent APIs)\n- 5 HIGH: Documentation/code misalignment (contradictory sections, wrong API shapes, missing gem notes)\n- 5 MEDIUM: Consistency \u0026 best practice violations (enum patterns, VCR usage, model names)\n- 4 LOW: Structural/polish issues (broken nav links, missing indexes)\n\nThis epic tracks fixing all issues found during the review. Each child task is independently completable and should be verified by building the docs site locally after changes.\n\nAcceptance criteria:\n- All dependency versions in installation.md and CLAUDE.md match dspy.gemspec\n- All code examples use correct API signatures verified against lib/\n- Getting-started docs consistently demonstrate T::Enum over String patterns\n- Test examples include VCR cassette annotations\n- All navigation links resolve to existing pages\n- `BRIDGETOWN_ENV=production npm run build` passes in docs/","status":"open","priority":2,"issue_type":"epic","owner":"hey@vicente.services","created_at":"2026-02-08T17:15:24.651257+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:15:24.651257+01:00"}
{"id":"dspy.rb-cna.1","title":"Fix installation.md Required Dependencies section","description":"installation.md lines 45-48 list wrong dependencies: openai (~\u003e 0.22.0), anthropic (~\u003e 1.5.0), gemini-ai (~\u003e 4.3), informers (~\u003e 1.2), opentelemetry-sdk (~\u003e 1.8). None of these are in the actual gemspec. Also says async (~\u003e 2.23) but gemspec has (~\u003e 2.29). The actual core deps are: dry-configurable (~\u003e 1.0), dry-logger (~\u003e 1.0), async (~\u003e 2.29), concurrent-ruby (~\u003e 1.3), sorbet-runtime (~\u003e 0.5), sorbet-schema (~\u003e 0.3), sorbet-baml (~\u003e 0.5), sorbet-toon (~\u003e 0.1), dspy-schema (~\u003e 1.0.0). Rewrite the Required Dependencies section to list only actual gemspec deps, and clarify that LLM provider SDKs come from adapter gems.","status":"closed","priority":1,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:16:43.847363+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:40:16.880492+01:00","closed_at":"2026-02-08T17:40:16.880492+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.1","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:16:43.848473+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.10","title":"Use T::Enum consistently in getting-started examples","description":"Several getting-started docs use const :sentiment, String where a T::Enum would better demonstrate DSPy.rb's type system. Affected files: first-program.md (SmartQuestionAnswering uses String for question_type), getting-started/core-concepts.md (some examples use String for sentiment). The skill says 'Schema over prose ‚Äî Define output structure with T::Struct and T::Enum types'. Update key examples to use enums.","status":"closed","priority":3,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-02-08T17:17:26.728183+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:47:08.08787+01:00","closed_at":"2026-02-08T17:47:08.08787+01:00","close_reason":"Already fixed by P1 work (T::Enum classes in first-program.md)","dependencies":[{"issue_id":"dspy.rb-cna.10","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:17:26.728897+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.11","title":"Add VCR cassette annotations to doc test examples","description":"Test examples in first-program.md (lines 313-348) and predictors.md (lines 397-436) show RSpec tests without VCR cassettes. These would fail without live API keys. Add , vcr: { cassette_name: 'example_name' } to integration test examples, matching the pattern in rails-integration.md which correctly shows VCR usage.","status":"closed","priority":3,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-02-08T17:17:29.598683+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:47:08.303038+01:00","closed_at":"2026-02-08T17:47:08.303038+01:00","close_reason":"Added VCR cassette annotations to first-program.md test example","dependencies":[{"issue_id":"dspy.rb-cna.11","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:17:29.599437+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.12","title":"Audit and update model names across all docs","description":"Several docs reference potentially outdated model names: installation.md:85 uses 'anthropic/claude-3-sonnet', multimodal.md:19 lists 'gpt-4-vision-preview' (deprecated), some Gemini examples use older naming. Do a sweep of all docs and update to current model names (e.g., claude-sonnet-4, gpt-4o, gemini-2.5-flash).","status":"closed","priority":3,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-02-08T17:17:33.081516+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:47:08.357905+01:00","closed_at":"2026-02-08T17:47:08.357905+01:00","close_reason":"Updated model names across core docs: multimodal.md, module-runtime-context.md, installation.md, quick-start.md, core-concepts.md, llms-full.txt.erb","dependencies":[{"issue_id":"dspy.rb-cna.12","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:17:33.082281+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.13","title":"Remove duplicate SmartQuestionAnswering section from first-program.md","description":"first-program.md has two sections titled 'Making It More Sophisticated' (lines 128 and 167). The second one redefines SmartQuestionAnswering with different fields and uses non-standard patterns (T.any(String, Symbol), enum: keyword). Merge or remove the duplicate, keeping only the version that follows DSPy.rb best practices.","status":"closed","priority":3,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-02-08T17:17:36.238917+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:47:08.142379+01:00","closed_at":"2026-02-08T17:47:08.142379+01:00","close_reason":"Already fixed by P1 work (renamed to Advanced Sorbet Types with AdvancedQA class)","dependencies":[{"issue_id":"dspy.rb-cna.13","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:17:36.23957+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.14","title":"Fix observability doc location references","description":"The skill README references observability under advanced/ (observability-interception.md) while the actual comprehensive doc is at production/observability.md. There may be two overlapping docs. Check if advanced/observability-interception.md exists and either consolidate or ensure they cover distinct topics. Update CLAUDE.md doc links if needed.","status":"closed","priority":3,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-02-08T17:17:39.514608+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:47:08.249831+01:00","closed_at":"2026-02-08T17:47:08.249831+01:00","close_reason":"No action needed - observability-interception.md covers Event System (distinct topic from production/observability.md)","dependencies":[{"issue_id":"dspy.rb-cna.14","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:17:39.515297+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.15","title":"Fix navigation breadcrumbs and prev/next links","description":"Several nav issues: first-program.md has no prev/next breadcrumbs. toolsets.md prev points to 'Memory' but there's no standalone memory page in the nav. core-concepts.md (getting-started) uses inconsistent relative paths for next links (../../core-concepts/signatures). Audit all docs for nav consistency.","status":"closed","priority":4,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-02-08T17:17:45.332097+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:48:09.843843+01:00","closed_at":"2026-02-08T17:48:09.843843+01:00","close_reason":"P4 cosmetic: first-program.md uses section: metadata instead of breadcrumbs. Nav consistency is a site-wide layout concern, not a doc accuracy issue.","dependencies":[{"issue_id":"dspy.rb-cna.15","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:17:45.332815+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.16","title":"Add core-concepts/memory.md to CLAUDE.md doc links","description":"The skill overview lists Memory as a core concept, and the nav shows it, but CLAUDE.md's Documentation Links section doesn't include a memory page under core-concepts/. Add the link if the page exists, or note it's missing.","status":"closed","priority":4,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-02-08T17:17:48.130214+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:50:18.493797+01:00","closed_at":"2026-02-08T17:50:18.493797+01:00","close_reason":"Removed dead core-concepts/memory.md link from CLAUDE.md ‚Äî page was intentionally deleted.","dependencies":[{"issue_id":"dspy.rb-cna.16","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:17:48.130848+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.17","title":"Create blog article index page","description":"32 articles exist under docs/src/_articles/ but there's no browsable index for users to discover them. The blog/index.md exists but may not list all articles. Verify the blog index properly surfaces all 32 articles for discovery.","status":"closed","priority":4,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-02-08T17:17:50.375729+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:48:09.917704+01:00","closed_at":"2026-02-08T17:48:09.917704+01:00","close_reason":"Blog index uses blog_home layout which auto-surfaces articles via Bridgetown collections. No manual index needed.","dependencies":[{"issue_id":"dspy.rb-cna.17","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:17:50.376523+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.18","title":"Fix README.md SearchTool/ReAct example: wrong classes and APIs","description":"README.md lines 140-161 have multiple errors in the ReAct agents example: (1) DSPy::Tools::Tool doesn't exist - should be DSPy::Tools::Base, (2) Tool uses Signature-style input do/output do blocks which tools don't have - should use tool_name, tool_description, and a call method with Sorbet sig, (3) DSPy::Tools::Toolset.new(tools: [...]) is wrong - Toolset is subclassed not instantiated, (4) signature: keyword arg on ReAct should be positional: DSPy::ReAct.new(ResearchTask, tools: [...], max_iterations: 5).","status":"closed","priority":1,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:25:00.814734+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:40:16.888669+01:00","closed_at":"2026-02-08T17:40:16.888669+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.18","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:25:00.815435+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.19","title":"Fix README.md reference to nonexistent examples/first_predictor.rb","description":"README.md line 204 references examples/first_predictor.rb which doesn't exist. Either create the file or update the path to an existing example.","status":"closed","priority":3,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:25:10.83524+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:47:08.197373+01:00","closed_at":"2026-02-08T17:47:08.197373+01:00","close_reason":"Fixed README.md example path to basic_search_agent.rb","dependencies":[{"issue_id":"dspy.rb-cna.19","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:25:10.835935+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.2","title":"Fix CLAUDE.md stale library versions","description":"CLAUDE.md Key Libraries section lists stale versions: async (~\u003e 2.23) should be (~\u003e 2.29), openai (~\u003e 0.16.0) is no longer a core dep, anthropic (~\u003e 1.5.0) is no longer a core dep, polars-df (~\u003e 0.20.0) is no longer a core dep, informers (~\u003e 1.2) is no longer a core dep. Missing deps: concurrent-ruby (~\u003e 1.3), sorbet-baml (~\u003e 0.5), sorbet-toon (~\u003e 0.1), dspy-schema (~\u003e 1.0.0). Update the entire Runtime Dependencies list to match dspy.gemspec and add a note that provider SDKs are in separate adapter gems.","status":"closed","priority":1,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:16:47.46713+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:40:16.882416+01:00","closed_at":"2026-02-08T17:40:16.882416+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.2","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:16:47.46785+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.20","title":"Remove fictional MemoryToolset references from llms.txt.erb","description":"llms.txt.erb references DSPy::Tools::MemoryToolset which doesn't exist in lib/dspy/tools/. The only toolsets are TextProcessingToolset and GithubCliToolset. Remove or replace MemoryToolset references.","status":"closed","priority":1,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:25:13.059021+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:40:16.890263+01:00","closed_at":"2026-02-08T17:40:16.890263+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.20","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:25:13.05994+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.21","title":"Remove fictional MemoryToolset references from llms-full.txt.erb","description":"llms-full.txt.erb references DSPy::Tools::MemoryToolset in 4+ places (lines 506, 989, 1380-1383, 2171) but this class doesn't exist. The Built-in Toolsets section (lines 1380-1389) lists fictional tool names (memory_store, memory_retrieve, etc.). Remove or replace all MemoryToolset references.","status":"closed","priority":1,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:25:15.244498+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:40:16.892086+01:00","closed_at":"2026-02-08T17:40:16.892086+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.21","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:25:15.245194+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.22","title":"Update stale model names in llms-full.txt.erb config examples","description":"llms-full.txt.erb line 122 uses anthropic/claude-3-sonnet (should be e.g. anthropic/claude-sonnet-4-20250514). Line 126 uses gemini/gemini-1.5-pro (should be e.g. gemini/gemini-2.5-flash). Update to current model names.","status":"closed","priority":2,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:25:17.163491+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:43:00.326677+01:00","closed_at":"2026-02-08T17:43:00.326677+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.22","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:25:17.164244+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.23","title":"Fix stale Current Limitations section in llms-full.txt.erb","description":"llms-full.txt.erb lines 62-68 Current Limitations section says 'Anthropic adapter accepts tools; OpenAI and Gemini adapters do not yet expose tool specs' but ReAct works with all providers via DSPy::Tools::Base now. Update or remove this outdated limitation.","status":"closed","priority":2,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:25:18.728973+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:43:00.32827+01:00","closed_at":"2026-02-08T17:43:00.32827+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.23","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:25:18.729595+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.24","title":"Remove fictional DSPy::LM.configure API from llms-full.txt.erb","description":"llms-full.txt.erb lines 2414-2419 show DSPy::LM.configure with http_timeout, max_retries, retry_delay options. This class-level configure method does not exist on DSPy::LM. Remove this section or replace with actual configuration pattern.","status":"closed","priority":2,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:25:20.665306+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:43:00.329782+01:00","closed_at":"2026-02-08T17:43:00.329782+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.24","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:25:20.666021+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.25","title":"Fix wrong error class namespaces in llms-full.txt.erb","description":"llms-full.txt.erb lines 1699-1706 reference DSPy::Errors::ValidationError and DSPy::Errors::LMError but the actual classes are DSPy::ValidationError (lib/dspy/errors.rb) and DSPy::LM::Error (lib/dspy/lm/errors.rb). Fix the namespaces.","status":"closed","priority":2,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:25:22.430312+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:43:00.331265+01:00","closed_at":"2026-02-08T17:43:00.331265+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.25","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:25:22.431003+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.3","title":"Fix first-program.md incorrect kwargs and API usage","description":"first-program.md has two issues: (1) Lines 73-74 use desc: kwarg for field descriptions but the actual codebase uses description: ‚Äî change all desc: to description:. (2) Line 143-144 uses enum: parameter on const (const :question_type, String, enum: [...]) which is not the documented DSPy.rb pattern. Should use a T::Enum class instead. Also line 184 uses T.any(String, Symbol) and T.enum([:factual, ...]) patterns that aren't standard DSPy usage.","status":"closed","priority":1,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:16:51.732772+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:40:16.884101+01:00","closed_at":"2026-02-08T17:40:16.884101+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.3","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:16:51.73358+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.4","title":"Fix first-program.md broken navigation links","description":"first-program.md lines 380-389 link to non-existent routes: /foundations/, /systems/, /collaboration/. These pages don't exist in docs/src/. Should link to: /core-concepts/ (for foundations), /advanced/pipelines/ (for systems), /core-concepts/toolsets/ (for collaboration).","status":"closed","priority":1,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:16:54.269476+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:40:16.885567+01:00","closed_at":"2026-02-08T17:40:16.885567+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.4","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:16:54.270206+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.5","title":"Reconcile installation.md contradictory dependency sections","description":"installation.md line 50 says 'You don't need to add these to your Gemfile‚Äîthey're installed automatically when you install dspy' referring to provider SDKs. But the next section 'Provider Adapter Gems' (line 52+) correctly says you need to explicitly add dspy-openai, dspy-anthropic, etc. These contradict each other. Remove provider SDKs from the Required Dependencies section entirely, since they are NOT auto-installed.","status":"closed","priority":2,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:17:01.943772+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:40:16.887002+01:00","closed_at":"2026-02-08T17:40:16.887002+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.5","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:17:01.944656+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.6","title":"Fix quick-start.md ReAct tools API (hash vs array)","description":"quick-start.md lines 250-257 shows ReAct with hash-style tools: tools: { weather: WeatherTool.new, calculate: calculator }. The actual DSPy::ReAct initializer (re_act.rb) accepts tools: [] (an array). Every other doc uses array style. Change to: tools: [WeatherTool.new].","status":"closed","priority":2,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:17:06.824269+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:43:00.321418+01:00","closed_at":"2026-02-08T17:43:00.321418+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.6","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:17:06.825012+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.7","title":"Add dspy-code_act gem note to modules.md custom module example","description":"modules.md line 432 shows @executor = DSPy::CodeAct.new(ExecutionSignature) in a 'Creating Custom Modules' example without noting that CodeAct requires the separate dspy-code_act gem. Add a comment or note: '# Requires gem dspy-code_act'.","status":"closed","priority":2,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-02-08T17:17:08.759324+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:43:00.32335+01:00","closed_at":"2026-02-08T17:43:00.32335+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.7","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:17:08.760195+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.8","title":"Verify Memory toolset APIs still exist in core gem","description":"CONFIRMED: MemoryToolset does NOT exist in lib/dspy/tools/. It's referenced in: toolsets.md (4x), toolsets-guide.md (3x), modules.md (3x + Memory.manager), module-runtime-context.md (1x), stateful-agents.md (10x+), python-comparison.md (1x). This is a large doc refactor across 6+ files. Either (a) build MemoryToolset or (b) rewrite all references. Consider splitting into sub-tasks per file.","status":"open","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-02-08T17:17:15.515837+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:41:17.252223+01:00","dependencies":[{"issue_id":"dspy.rb-cna.8","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:17:15.516515+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-cna.9","title":"Add T.nilable(T::Array) warning to complex-types.md","description":"complex-types.md shows T.nilable(T::Array[String]) patterns (e.g., toolsets.md line 247) without warning about OpenAI structured outputs incompatibility. The skill best practice says to prefer T::Array[X], default: [] over T.nilable(T::Array[X]). Add a note/callout box near the nilable array examples warning that this pattern can cause issues with OpenAI structured outputs and recommending defaults instead.","status":"closed","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-02-08T17:17:19.776687+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-02-08T17:43:00.324931+01:00","closed_at":"2026-02-08T17:43:00.324931+01:00","close_reason":"Closed","dependencies":[{"issue_id":"dspy.rb-cna.9","depends_on_id":"dspy.rb-cna","type":"parent-child","created_at":"2026-02-08T17:17:19.777436+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-ds6","title":"Command injection in GitHub CLI toolset","description":"shell_escape() only escapes double quotes, allowing injection via backticks or $() (lib/dspy/tools/github_cli_toolset.rb:268-278). Fix: use Shellwords.shellescape or Open3.capture3 with array args.","status":"open","priority":1,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-01-24T20:00:47.28316+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-24T20:01:42.337743+01:00"}
{"id":"dspy.rb-dz6","title":"[Example] Create example LLM-backed tool module","description":"**Phase**: Examples","acceptance_criteria":"- Working example with real signature\n- Shows LM selection\n- Shows technique selection (Predict vs CoT)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.604583+01:00","updated_at":"2026-01-14T19:00:17.604583+01:00","dependencies":[{"issue_id":"dspy.rb-dz6","depends_on_id":"dspy.rb-gw7","type":"blocks","created_at":"2026-01-14T19:01:18.798491+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-eh4","title":"[TDD] Create TestEventObserver module for specs","description":"## Context\nBefore removing global subscription, we need a test helper that captures events using the module-based approach.\n\n## TDD Steps\n\n### 1. RED: Write failing test for TestEventObserver\n```ruby\n# spec/support/test_event_observer.rb\nRSpec.describe 'TestEventObserver' do\n  it 'captures events from nested module calls' do\n    observer = TestEventObserver.new\n    observer.observe do\n      DSPy.event('test.event', data: 'value')\n    end\n    expect(observer.events).to include(hash_including(name: 'test.event'))\n  end\nend\n```\n\n### 2. GREEN: Implement TestEventObserver\n```ruby\nclass TestEventObserver \u003c DSPy::Module\n  subscribe '*', :capture_event\n  \n  attr_reader :events\n  \n  def initialize\n    super\n    @events = []\n  end\n  \n  def forward(\u0026block)\n    block.call\n  end\n  \n  def observe(\u0026block)\n    forward(\u0026block)\n  end\n  \n  def capture_event(event_name, attrs)\n    @events \u003c\u003c { name: event_name, attrs: attrs }\n  end\n  \n  def clear!\n    @events.clear\n  end\nend\n```\n\n### 3. REFACTOR: Add convenience methods\n- `events_named(pattern)` - filter by event name\n- `last_event` - most recent event\n- Integration with RSpec matchers\n\n## Files to Create\n- spec/support/test_event_observer.rb\n\n## Acceptance Criteria\n- [ ] TestEventObserver captures events from nested modules\n- [ ] Works with scope: :descendants (default)\n- [ ] Provides convenient query methods\n- [ ] Can be used in before/after blocks","status":"closed","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-26T15:19:44.163606+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-26T15:32:40.325605+01:00","closed_at":"2026-01-26T15:32:40.325605+01:00","close_reason":"No longer needed. Tests can use internal DSPy.events.subscribe directly since we're keeping it accessible (just undocumented)."}
{"id":"dspy.rb-emi","title":"[Refactor] Refactor ReAct to use ToolOrchestrator","description":"**Phase**: Orchestrator","acceptance_criteria":"- Delegates to ToolOrchestrator internally\n- Maintains backward-compatible API\n- Deprecation path documented","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.607632+01:00","updated_at":"2026-01-14T19:00:17.607632+01:00","dependencies":[{"issue_id":"dspy.rb-emi","depends_on_id":"dspy.rb-8gz","type":"blocks","created_at":"2026-01-14T19:01:39.938469+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-epx","title":"[Refactor] Centralize T::Enum deserialization with case-insensitive fallback","status":"closed","priority":1,"issue_type":"feature","owner":"hey@vicente.services","created_at":"2026-01-29T17:57:58.808316+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-29T18:10:27.986204+01:00","closed_at":"2026-01-29T18:10:27.986204+01:00","close_reason":"Implemented TypeCoercion.deserialize_enum with try_deserialize + cached CI hash. All 6 call sites updated."}
{"id":"dspy.rb-f6d","title":"[Refactor] Update TOON Reconstructor to delegate enum deserialization","status":"closed","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-29T17:58:01.963525+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-29T18:10:28.216742+01:00","closed_at":"2026-01-29T18:10:28.216742+01:00","close_reason":"Reconstructor.deserialize_enum now delegates to TypeCoercion.deserialize_enum","dependencies":[{"issue_id":"dspy.rb-f6d","depends_on_id":"dspy.rb-epx","type":"blocks","created_at":"2026-01-29T17:58:16.496713+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-fd9","title":"Command injection in text processing toolset","description":"grep/ripgrep methods use shell backticks with user patterns without escaping (lib/dspy/tools/text_processing_toolset.rb:43-44, 82-86). Pattern can break out of single quotes. Fix: use Ruby regex or Shellwords.shellescape.","status":"open","priority":1,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-01-24T20:00:47.400426+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-24T20:01:42.552731+01:00"}
{"id":"dspy.rb-fwx","title":"[TDD] Update documentation for module-only events","description":"## Context\nUpdate documentation to show BOTH event subscription patterns with clear guidance on when to use which. Per DHH: 'Two patterns. Clear purpose. No hidden APIs.'\n\n## TDD Steps\n\n### 1. RED: Identify docs to update\n```bash\ngrep -r 'BaseSubscriber' docs/\ngrep -r 'SubscriberMixin' docs/\n```\n\n### 2. GREEN: Rewrite documentation\n\n**docs/src/core-concepts/events.md - New Structure:**\n\n```markdown\n# Event System\n\n## Two Ways to Subscribe\n\n### Pattern 1: Module-Scoped (Preferred for Agents)\n\nUse this when you want events scoped to a module's execution tree:\n\n\\`\\`\\`ruby\nclass MyAgent \u003c DSPy::Module\n  subscribe 'lm.tokens', :track_tokens, scope: :descendants\n  \n  def track_tokens(event, attrs)\n    @total += attrs[:total_tokens]\n  end\nend\n\\`\\`\\`\n\nBenefits:\n- Automatic WeakRef cleanup when module is GC'd\n- Scoped to module hierarchy (descendants or self-only)\n- Instance method dispatch\n\n### Pattern 2: Global (For Integrations \u0026 Utilities)\n\nUse this for observability tools, metrics collectors, or any code outside the module hierarchy:\n\n\\`\\`\\`ruby\nDSPy.events.subscribe('score.create') do |event, attrs|\n  Langfuse.export(attrs)\nend\n\\`\\`\\`\n\nBenefits:\n- Receives ALL matching events\n- Works from anywhere (not just modules)\n- Simple pub/sub pattern\n```\n\n**Remove:**\n- All BaseSubscriber examples\n- All SubscriberMixin references\n\n### 3. REFACTOR: Build docs site\n```bash\ncd docs \u0026\u0026 npm run build\n```\n\n## Files to Edit\n- docs/src/core-concepts/events.md\n- docs/src/production/observability.md  \n- docs/src/advanced/observability-interception.md\n- docs/src/llms-full.txt.erb\n\n## Acceptance Criteria\n- [ ] Both patterns documented with clear guidance\n- [ ] No BaseSubscriber references\n- [ ] No SubscriberMixin references\n- [ ] Docs site builds successfully","status":"closed","priority":3,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-26T15:19:44.989026+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-26T18:13:02.638655+01:00","closed_at":"2026-01-26T18:13:02.638655+01:00","close_reason":"Updated all documentation to remove BaseSubscriber references and use DSPy.events.subscribe directly","dependencies":[{"issue_id":"dspy.rb-fwx","depends_on_id":"dspy.rb-wbn","type":"blocks","created_at":"2026-01-26T15:20:03.672657+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"},{"issue_id":"dspy.rb-fwx","depends_on_id":"dspy.rb-6kp","type":"blocks","created_at":"2026-01-26T15:20:03.742503+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"},{"issue_id":"dspy.rb-fwx","depends_on_id":"dspy.rb-04f","type":"blocks","created_at":"2026-01-26T15:34:28.165377+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-fxf","title":"CodeAct eval() arbitrary code execution vulnerability","description":"CRITICAL: CodeAct uses Ruby eval() to execute LLM-generated code without sandboxing (lib/dspy/code_act.rb:400-428). An attacker could craft prompts causing malicious code execution. Solutions: container isolation, safe_ruby gem, or static analysis allowlist.","status":"open","priority":0,"issue_type":"bug","owner":"hey@vicente.services","created_at":"2026-01-24T20:00:47.166582+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-24T20:01:37.789826+01:00"}
{"id":"dspy.rb-gg8","title":"[Feature] Add `to_mcp_schema` export to Module","description":"**Phase**: Foundation","acceptance_criteria":"- Returns hash with `name`, `description`, `inputSchema`\n- Schema matches MCP tool specification\n- Works on module instances","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.603829+01:00","updated_at":"2026-01-14T19:00:17.603829+01:00","dependencies":[{"issue_id":"dspy.rb-gg8","depends_on_id":"dspy.rb-gym","type":"blocks","created_at":"2026-01-14T19:01:08.98367+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-gw7","title":"[Feature] Add `signature` DSL to DSPy::Module","description":"**Phase**: Foundation","acceptance_criteria":"- `signature MySignature` binds signature to module\n- `bound_signature` returns the bound class\n- Works with inheritance\n- No breaking changes to existing modules","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.602625+01:00","updated_at":"2026-01-14T19:00:17.602625+01:00"}
{"id":"dspy.rb-gym","title":"[Feature] Add tool metadata methods to Module","description":"**Phase**: Foundation","acceptance_criteria":"- `tool_name` derived from signature class name\n- `tool_description` returns signature description\n- `input_schema` / `output_schema` return JSON Schema\n- Returns nil gracefully when no signature bound","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.603392+01:00","updated_at":"2026-01-14T19:00:17.603392+01:00","dependencies":[{"issue_id":"dspy.rb-gym","depends_on_id":"dspy.rb-gw7","type":"blocks","created_at":"2026-01-14T19:01:08.93263+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-hcp","title":"Sequential bootstrap execution in MIPROv2","description":"create_bootstrapped_demos executes LLM calls sequentially (lib/dspy/teleprompt/utils.rb:334-381). For 100 training examples, this means sequential 500ms-2s calls. Fix: use Concurrent::Promises pattern from existing evaluate_in_parallel.","status":"open","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-24T20:00:55.451471+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-24T20:01:57.197609+01:00"}
{"id":"dspy.rb-hf3","title":"[Refactor] Update ReAct to accept signature-bound modules","description":"**Phase**: Migration","acceptance_criteria":"- Accept modules with `bound_signature`\n- Use `to_mcp_schema` for tool descriptions\n- Call `forward(**args)` for execution\n- Backward compat: still accept old `Tools::Base`\n- Deprecation warning for old format","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.605971+01:00","updated_at":"2026-01-14T19:00:17.605971+01:00","dependencies":[{"issue_id":"dspy.rb-hf3","depends_on_id":"dspy.rb-gg8","type":"blocks","created_at":"2026-01-14T19:01:26.434891+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-hgn","title":"Unified Tool Model (Signature + Module)","description":"Replace Tools::Base and Tools::Toolset with a unified model where Module + Signature = Tool. See ADR-018.","status":"open","priority":2,"issue_type":"epic","owner":"hey@vicente.services","created_at":"2026-01-14T18:59:26.952257+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-14T18:59:26.952257+01:00"}
{"id":"dspy.rb-iwz","title":"[TDD] Migrate all specs to TestEventObserver","description":"## Context\nAll specs using DSPy.events.subscribe need to migrate to TestEventObserver pattern.\n\n## TDD Steps\n\n### 1. RED: Identify all specs using global subscription\n```bash\ngrep -r 'DSPy\\.events\\.subscribe' spec/\n```\n\nFiles to migrate:\n- spec/unit/event_system_spec.rb\n- spec/unit/typed_events_spec.rb\n- spec/unit/module_event_integration_spec.rb\n- spec/unit/dspy/lm_request_correlation_spec.rb\n- spec/dspy/scores/evaluators_spec.rb\n- spec/dspy/scores/evals_integration_spec.rb\n- spec/dspy/scores/dspy_score_method_spec.rb\n- spec/integration/dspy/lm_spec.rb\n- spec/integration/deep_research/module_spec.rb\n\n### 2. GREEN: Migrate each spec file\n\n**Pattern A: Wrap test code in observer.observe block**\n```ruby\n# Before\nit 'emits token events' do\n  events = []\n  DSPy.events.subscribe('lm.tokens') { |e, a| events \u003c\u003c a }\n  predictor.call(question: 'test')\n  expect(events.first[:total_tokens]).to be \u003e 0\nend\n\n# After\nit 'emits token events' do\n  observer = TestEventObserver.new\n  observer.observe do\n    predictor.call(question: 'test')\n  end\n  token_event = observer.events_named('lm.tokens').first\n  expect(token_event[:attrs][:total_tokens]).to be \u003e 0\nend\n```\n\n**Pattern B: For tests that test the event system itself**\nThese may need special handling - we still need to verify Module.subscribe works.\n\n### 3. REFACTOR: Remove DSPy.events.clear_listeners calls\n\n## Files to Edit\n- All spec files listed above\n\n## Acceptance Criteria\n- [ ] No spec uses DSPy.events.subscribe\n- [ ] No spec uses DSPy.events.clear_listeners\n- [ ] All specs pass\n- [ ] Coverage maintained","status":"closed","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-26T15:19:44.72399+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-26T15:32:40.449995+01:00","closed_at":"2026-01-26T15:32:40.449995+01:00","close_reason":"No longer needed. Tests can keep using DSPy.events.subscribe since we're keeping it accessible (just undocumented). No migration required.","dependencies":[{"issue_id":"dspy.rb-iwz","depends_on_id":"dspy.rb-eh4","type":"blocks","created_at":"2026-01-26T15:20:03.356025+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-mc8","title":"[Deprecation] Deprecate Tools::Base","description":"**Phase**: Cleanup","acceptance_criteria":"- Warning on class inheritance\n- Warning on usage\n- Migration guide in docs","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.607946+01:00","updated_at":"2026-01-14T19:00:17.607946+01:00","dependencies":[{"issue_id":"dspy.rb-mc8","depends_on_id":"dspy.rb-hf3","type":"blocks","created_at":"2026-01-14T19:01:47.601192+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-q5h","title":"Code duplication in multimodal message formatting","description":"format_multimodal_messages duplicated in 4 adapters (~100 LOC): openai_adapter.rb:146-171, anthropic_adapter.rb:271-296, gemini_adapter.rb:180-205, ruby_llm_adapter.rb:362-386. Extract to base Adapter class or shared mixin.","status":"closed","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-24T20:00:47.753674+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-24T20:15:25.103591+01:00","closed_at":"2026-01-24T20:15:25.103591+01:00","close_reason":"Extracted format_multimodal_messages to base Adapter class. Removed 112 lines of duplicate code from 4 adapters, replaced with 43 lines of shared code. Net savings: 69 LOC. All 2349 tests pass."}
{"id":"dspy.rb-rfv","title":"[Refactor] Remove duplicate is_enum_type? and extract_enum_class from Prediction","status":"closed","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-29T17:58:03.299702+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-29T18:10:28.101954+01:00","closed_at":"2026-01-29T18:10:28.101954+01:00","close_reason":"Deleted 55 lines of duplicate is_enum_type?/extract_enum_class from Prediction, replaced with delegates to TypeCoercion","dependencies":[{"issue_id":"dspy.rb-rfv","depends_on_id":"dspy.rb-epx","type":"blocks","created_at":"2026-01-29T17:58:16.423358+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-v0w","title":"[Refactor] Migrate GithubCliToolset","description":"**Phase**: Migration","acceptance_criteria":"- Create signatures for each operation\n- Create individual tool modules\n- Update any dependent code","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.606655+01:00","updated_at":"2026-01-14T19:00:17.606655+01:00","dependencies":[{"issue_id":"dspy.rb-v0w","depends_on_id":"dspy.rb-cdb","type":"blocks","created_at":"2026-01-14T19:01:26.51523+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-v8a","title":"[TDD] Remove BaseSubscriber class","description":"## Context\nRemove BaseSubscriber class and update examples that use it. Examples will use `DSPy.events.subscribe` directly (which is cleaner anyway).\n\n## TDD Steps\n\n### 1. RED: Identify all BaseSubscriber usages\n```bash\ngrep -r 'BaseSubscriber' --include='*.rb'\ngrep -r '\u003c DSPy::Events::BaseSubscriber' --include='*.rb'\n```\n\n### 2. GREEN: Remove/refactor\n\n**a) Delete the class:**\n- Delete `lib/dspy/events/subscribers.rb` (~45 LOC)\n- Remove require from `lib/dspy.rb`\n\n**b) Update examples to use direct subscription:**\n```ruby\n# Before (BaseSubscriber pattern)\nclass TokenTracker \u003c DSPy::Events::BaseSubscriber\n  def subscribe\n    add_subscription('llm.*') { |name, attrs| track(attrs) }\n  end\nend\n\n# After (direct subscription - cleaner!)\nclass TokenTracker\n  def initialize\n    @subscription = DSPy.events.subscribe('llm.*') { |name, attrs| track(attrs) }\n  end\n  \n  def unsubscribe\n    DSPy.events.unsubscribe(@subscription)\n  end\nend\n```\n\n**c) Update spec examples:**\n- Refactor `spec/unit/module_event_integration_spec.rb` examples\n\n### 3. REFACTOR: Run full test suite\n\n## Files to Delete\n- lib/dspy/events/subscribers.rb\n\n## Files to Edit\n- lib/dspy.rb (remove require)\n- examples/event_system_demo.rb\n- spec/unit/module_event_integration_spec.rb\n\n## Acceptance Criteria\n- [ ] BaseSubscriber class removed\n- [ ] Examples use DSPy.events.subscribe directly\n- [ ] All tests pass\n- [ ] ~45 LOC removed","status":"closed","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-26T15:19:44.314209+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-26T18:09:05.167449+01:00","closed_at":"2026-01-26T18:09:05.167449+01:00","close_reason":"Removed SubscriberMixin, BaseSubscriber, and updated all usages to use DSPy.events.subscribe directly","dependencies":[{"issue_id":"dspy.rb-v8a","depends_on_id":"dspy.rb-eh4","type":"blocks","created_at":"2026-01-26T15:20:03.290572+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-vfe","title":"Simplify Event API: Module-Only Subscriptions","description":"Remove dead event subscription wrappers and clarify documentation. Keep both APIs public with clear guidance.\n\n## Goal (DHH + Simplicity)\n- Delete dead code (SubscriberMixin, BaseSubscriber)\n- Keep `DSPy.events` PUBLIC (not hidden)\n- Document BOTH patterns with clear guidance on when to use which\n- ~124 LOC reduction\n\n## Final API (Two Patterns, Both Documented)\n\n### Pattern 1: Module-scoped subscriptions (preferred for agents)\n```ruby\nclass MyAgent \u003c DSPy::Module\n  subscribe 'lm.tokens', :track_tokens, scope: :descendants\n  \n  def track_tokens(event, attrs)\n    # Automatically scoped to this instance's execution tree\n  end\nend\n```\n\n### Pattern 2: Global subscriptions (for observability integrations)\n```ruby\nDSPy.events.subscribe('score.create') do |event, attrs|\n  # No scoping, receives all matching events\nend\n```\n\n## What We're Removing\n- SubscriberMixin (~79 LOC) - dead code, never used\n- BaseSubscriber (~45 LOC) - pointless inheritance wrapper\n\n## What We're Keeping\n- `DSPy.events.subscribe` - PUBLIC, for integrations\n- `DSPy::Module.subscribe` - PUBLIC, for module-scoped handling\n\n## Deferred\n- SubcriptionScope typo fix - defer to future breaking release","status":"open","priority":1,"issue_type":"epic","owner":"hey@vicente.services","created_at":"2026-01-26T15:18:35.062236+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-26T17:51:43.37268+01:00"}
{"id":"dspy.rb-wbn","title":"[TDD] Refactor Langfuse ScoresExporter to module-based","description":"## Context\nScoresExporter currently uses DSPy.events.subscribe directly. Refactor to a module mixin pattern.\n\n## TDD Steps\n\n### 1. RED: Write test for new Langfuse module pattern\n```ruby\nRSpec.describe 'Langfuse Module Integration' do\n  it 'exports scores when included in user module' do\n    class MyApp \u003c DSPy::Module\n      include DSPy::O11y::Langfuse::ScoreSubscriptions\n      \n      def forward(question:)\n        DSPy.score('accuracy', 0.95, trace_id: 'test-123')\n      end\n    end\n    \n    expect(langfuse_client).to receive(:score).with(hash_including(value: 0.95))\n    MyApp.new.call(question: 'test')\n  end\nend\n```\n\n### 2. GREEN: Implement module mixin\n```ruby\n# lib/dspy/o11y/langfuse/score_subscriptions.rb\nmodule DSPy\n  module O11y\n    module Langfuse\n      module ScoreSubscriptions\n        def self.included(base)\n          base.subscribe 'score.create', :_langfuse_export_score\n        end\n        \n        def _langfuse_export_score(event_name, attrs)\n          return unless DSPy::O11y::Langfuse.configured?\n          DSPy::O11y::Langfuse.client.score(\n            trace_id: attrs[:trace_id],\n            name: attrs[:score_name],\n            value: attrs[:score_value]\n          )\n        end\n      end\n    end\n  end\nend\n```\n\n### 3. REFACTOR: Update ScoresExporter class\n- Remove direct DSPy.events.subscribe usage\n- Delegate to the mixin or deprecate the class entirely\n\n## Files to Create\n- lib/dspy/o11y/langfuse/score_subscriptions.rb\n\n## Files to Edit\n- lib/dspy/o11y/langfuse/scores_exporter.rb\n\n## Acceptance Criteria\n- [ ] Users can `include DSPy::O11y::Langfuse::ScoreSubscriptions` in their modules\n- [ ] Score events automatically export to Langfuse\n- [ ] No direct DSPy.events.subscribe usage\n- [ ] Integration tests pass","status":"closed","priority":2,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-26T15:19:44.588841+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-26T15:33:20.418133+01:00","closed_at":"2026-01-26T15:33:20.418133+01:00","close_reason":"No longer needed as separate task. Langfuse update is now part of dspy.rb-04f (Make EventRegistry internal). ScoresExporter will use DSPy.send(:event_registry).subscribe().","dependencies":[{"issue_id":"dspy.rb-wbn","depends_on_id":"dspy.rb-04f","type":"blocks","created_at":"2026-01-26T15:20:03.544016+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-yk4","title":"Replace bare rescue =\u003e e with rescue StandardError","description":"30+ instances of bare 'rescue =\u003e e' which catches SystemExit and SignalException. Locations: lib/dspy/lm/usage.rb:102,136,153,170, lib/dspy/evals.rb:390,429,455,487. Fix: change to 'rescue StandardError =\u003e e'.","status":"closed","priority":3,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-24T20:00:55.572953+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-24T20:30:12.047098+01:00","closed_at":"2026-01-24T20:30:12.047098+01:00","close_reason":"Replaced 54 bare 'rescue =\u003e e' with 'rescue StandardError =\u003e e' across 25 files. Prevents accidental catching of SystemExit and SignalException."}
{"id":"dspy.rb-z0m","title":"[Refactor] Migrate TextProcessingToolset","description":"**Phase**: Migration","acceptance_criteria":"- Evaluate: keep as toolset, inline, or split?\n- Migrate or deprecate","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-14T19:00:17.606324+01:00","updated_at":"2026-01-14T19:00:17.606324+01:00","dependencies":[{"issue_id":"dspy.rb-z0m","depends_on_id":"dspy.rb-cdb","type":"blocks","created_at":"2026-01-14T19:01:26.474766+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano"}]}
{"id":"dspy.rb-zjl","title":"Remove dead code in ReAct and CodeAct","description":"~115 lines of dead code: ThoughtBase/ReActObservationBase (re_act.rb:37-69, never instantiated), validate_output_schema! (re_act.rb:858-884, code_act.rb:430-456, Sorbet handles this), string_compatible_type? alias (re_act.rb:783-784).","status":"closed","priority":3,"issue_type":"task","owner":"hey@vicente.services","created_at":"2026-01-24T20:00:55.69627+01:00","created_by":"Vicente Reig Rinc√≥n de Arellano","updated_at":"2026-01-24T20:11:37.811581+01:00","closed_at":"2026-01-24T20:11:37.811581+01:00","close_reason":"Removed 91 lines of dead code: ThoughtBase, ReActObservationBase classes, string_compatible_type? alias, validate_output_schema! methods from both ReAct and CodeAct. All 2349 tests pass."}
